package com.fujisoft.campaign;import android.annotation.SuppressLint;import android.content.SharedPreferences;import android.os.Bundle;import android.support.v7.widget.Toolbar;import android.view.View;import android.webkit.WebChromeClient;import android.webkit.WebView;import android.webkit.WebViewClient;import android.widget.ImageButton;import android.widget.TextView;import com.fujisoft.campaign.utils.Constants;public class LuckDrawActivity extends BaseActivity{    private WebView webView;    private String userId = null;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_luck_draw);        SharedPreferences sharedPreferences =getSharedPreferences(Constants.SHARED_PREFERENCES_FILE_NAME, MODE_PRIVATE);        userId = sharedPreferences.getString(Constants.EXTRA_USER_ID, "");        init();    }    @Override    public void onCreateCustomToolBar(Toolbar toolbar) {        super.onCreateCustomToolBar(toolbar);        toolbar.showOverflowMenu();        getLayoutInflater().inflate(R.layout.toolbar_button, toolbar);        ImageButton tool_bar_back_button = (ImageButton) findViewById(R.id.tool_bar_back_button);        tool_bar_back_button.setVisibility(View.VISIBLE);        tool_bar_back_button.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                onBackPressed();            }        });        TextView tool_bar_center_text_view = (TextView) findViewById(R.id.tool_bar_center_text_view);        tool_bar_center_text_view.setVisibility(View.VISIBLE);        tool_bar_center_text_view.setText(R.string.luck_draw);    }    @SuppressLint({ "SetJavaScriptEnabled", "JavascriptInterface" })    private void init(){        webView = (WebView) findViewById(R.id.testView);        webView.getSettings().setJavaScriptEnabled(true);        webView.getSettings().setUseWideViewPort(true);        webView.getSettings().setLoadWithOverviewMode(true);        webView.setWebChromeClient(new WebChromeClient());        webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);        webView.requestFocus();        //WebView加载web资源        webView.loadUrl("file:///android_asset/Mall_luckyDraw.html?userId="+userId);        //覆盖WebView默认使用第三方或系统默认浏览器打开网页的行为，使网页用WebView打开        webView.setWebViewClient(new WebViewClient(){            @Override            public boolean shouldOverrideUrlLoading(WebView view, String url) {                // TODO Auto-generated method stub                //返回值是true的时候控制去WebView打开，为false调用系统浏览器或第三方浏览器                view.loadUrl(url);                return true;            }        });    }}